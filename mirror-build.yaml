steps:
  - name: gcr.io/cloud-builders/gcloud
    args: ['source', 'repos','clone','${REPO_NAME}']
  - name: gcr.io/cloud-builders/mvn
    entrypoint: 'mvn'
    args: ['package']
  - name: gcr.io/cloud-builders/gcloud
    entrypoint: /bin/bash
    args: ['-c', 'gcloud beta secrets versions access latest --secret=ecosystem-frontend-config > config.properties']
  - name: gcr.io/cloud-builders/gsutil
    args: ['mv','config.properties','target/turnonline-ecosystem-frontend/WEB-INF/classes/config.properties']
  - name: gcr.io/cloud-builders/gcloud
    args: ['app', 'deploy','target/turnonline-ecosystem-frontend']
